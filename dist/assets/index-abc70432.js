import{f as q,g as W,p as oe,R as p,h as he,r as Le,M as ee,N as Qt,t as Jt,O as Xt,v as H,n as Zt,P as ea,o as ke,Q as ta,G as xe,a as U,j as a,u as Ye,q as Ge,y as qe,z as $e,L as M,b as aa,H as me,w as C,J as sa,B as w,F as fe,K as ra}from"./index-512edc22.js";import{T as la}from"./Table-c9fa676a.js";import{P as na,D as oa,I as ia}from"./index-1cb05498.js";import{I as ca}from"./IconEye-871881f5.js";import{I as da}from"./IconTrash-2fd76995.js";import{I as pa,L as ua}from"./LoadingScreen-e70f1c26.js";import{A as ma}from"./AgencySelect-0a9d74a5.js";import{F as ha}from"./FileDropzone-0c9b03ba.js";import{i as xa,g as fa,a as ga,u as va,C as T,O as ba,S as Z,I as ja}from"./IconArrowLeft-ec3c952a.js";import{c as We,u as ya,I as He,T as I}from"./TextInput-8f5bb177.js";import{P as Pa}from"./ProductSelect-5a612dec.js";import{N as _a,T as wa}from"./NumberInput-52739ead.js";import{I as Na}from"./IconPlus-e31ad21b.js";import{u as Ue}from"./use-form-d3741bad.js";import{C as v}from"./Card-3e3a6d7c.js";import{I as Sa}from"./ItemSelect-47969771.js";import{a as Qs}from"./ItemSelect-47969771.js";import{T as h}from"./Table-49fb85d5.js";import{P as Ia}from"./PasswordInput-514ff1f4.js";import"./clamp-73f6bef2.js";import"./LoadingOverlay-35619be1.js";import"./IconPhoto-807ffa91.js";import"./ScrollArea-e9b4df73.js";function Oa({data:t,value:e}){const s=e.map(o=>o.trim().toLowerCase());return t.reduce((o,l)=>(xa(l)?o.push({group:l.group,items:l.items.filter(i=>s.indexOf(i.value.toLowerCase().trim())===-1)}):s.indexOf(l.value.toLowerCase().trim())===-1&&o.push(l),o),[])}const[Da,Ca]=We(),[Ea,ge]=We();var ka={root:"m-7cda1cd6","root--default":"m-44da308b","root--contrast":"m-e3a01f8",label:"m-1e0e6180",remove:"m-ae386778",group:"m-1dcfd90b"};const ie=ka;var $a=Object.defineProperty,te=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Be=(t,e,s)=>e in t?$a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Te=(t,e)=>{for(var s in e||(e={}))Qe.call(e,s)&&Be(t,s,e[s]);if(te)for(var s of te(e))Je.call(e,s)&&Be(t,s,e[s]);return t},Ba=(t,e)=>{var s={};for(var r in t)Qe.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&te)for(var r of te(t))e.indexOf(r)<0&&Je.call(t,r)&&(s[r]=t[r]);return s};const Ta={},Ma=Le((t,{gap:e},{size:s})=>({group:{"--pg-gap":e!==void 0?ee(e):ee(s,"pg-gap")}})),ve=q((t,e)=>{const s=W("PillGroup",Ta,t),r=s,{classNames:o,className:l,style:i,styles:n,unstyled:c,vars:O,size:f,disabled:y}=r,P=Ba(r,["classNames","className","style","styles","unstyled","vars","size","disabled"]),g=ge(),d=(g==null?void 0:g.size)||f||void 0,u=oe({name:"PillGroup",classes:ie,props:s,className:l,style:i,classNames:o,styles:n,unstyled:c,vars:O,varsResolver:Ma,stylesCtx:{size:d},rootSelector:"group"});return p.createElement(Da,{value:{size:d,disabled:y}},p.createElement(he,Te(Te({ref:e,size:d},u("group")),P)))});ve.classes=ie;ve.displayName="@mantine/core/PillGroup";var Fa=Object.defineProperty,Ra=Object.defineProperties,za=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,Me=(t,e,s)=>e in t?Fa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,L=(t,e)=>{for(var s in e||(e={}))Xe.call(e,s)&&Me(t,s,e[s]);if(ae)for(var s of ae(e))Ze.call(e,s)&&Me(t,s,e[s]);return t},Fe=(t,e)=>Ra(t,za(e)),Aa=(t,e)=>{var s={};for(var r in t)Xe.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&ae)for(var r of ae(t))e.indexOf(r)<0&&Ze.call(t,r)&&(s[r]=t[r]);return s};const Va={variant:"default"},Ka=Le((t,{radius:e},{size:s})=>({root:{"--pill-fz":ee(s,"pill-fz"),"--pill-height":ee(s,"pill-height"),"--pill-radius":e===void 0?void 0:Jt(e)}})),G=q((t,e)=>{const s=W("Pill",Va,t),r=s,{classNames:o,className:l,style:i,styles:n,unstyled:c,vars:O,variant:f,children:y,withRemoveButton:P,onRemove:g,removeButtonProps:d,radius:u,size:N,disabled:F}=r,E=Aa(r,["classNames","className","style","styles","unstyled","vars","variant","children","withRemoveButton","onRemove","removeButtonProps","radius","size","disabled"]),k=Ca(),R=ge(),$=N||(k==null?void 0:k.size)||void 0,z=(R==null?void 0:R.variant)==="filled"?"contrast":f||"default",A=oe({name:"Pill",classes:ie,props:s,className:l,style:i,classNames:o,styles:n,unstyled:c,vars:O,varsResolver:Ka,stylesCtx:{size:$}});return p.createElement(he,L(Fe(L({component:"span",ref:e,variant:z,size:$},A("root",{variant:z})),{mod:{"with-remove":P,disabled:F||(k==null?void 0:k.disabled)}}),E),p.createElement("span",L({},A("label")),y),P&&p.createElement(Qt,Fe(L(L({variant:"transparent",radius:u,tabIndex:-1,"aria-hidden":!0,unstyled:c},d),A("remove",{className:d==null?void 0:d.className,style:d==null?void 0:d.style})),{onMouseDown:S=>{var D;S.preventDefault(),S.stopPropagation(),(D=d==null?void 0:d.onMouseDown)==null||D.call(d,S)},onClick:S=>{var D;S.stopPropagation(),g==null||g(),(D=d==null?void 0:d.onClick)==null||D.call(d,S)}})))});G.classes=ie;G.displayName="@mantine/core/Pill";G.Group=ve;var La={field:"m-45c4369d"};const et=La;var Ya=Object.defineProperty,Ga=Object.defineProperties,qa=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,Re=(t,e,s)=>e in t?Ya(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ze=(t,e)=>{for(var s in e||(e={}))tt.call(e,s)&&Re(t,s,e[s]);if(se)for(var s of se(e))at.call(e,s)&&Re(t,s,e[s]);return t},Wa=(t,e)=>Ga(t,qa(e)),Ha=(t,e)=>{var s={};for(var r in t)tt.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&se)for(var r of se(t))e.indexOf(r)<0&&at.call(t,r)&&(s[r]=t[r]);return s};const Ua={type:"visible"},be=q((t,e)=>{const s=W("PillsInputField",Ua,t),r=s,{classNames:o,className:l,style:i,styles:n,unstyled:c,vars:O,type:f,disabled:y,id:P,pointer:g}=r,d=Ha(r,["classNames","className","style","styles","unstyled","vars","type","disabled","id","pointer"]),u=ge(),N=ya(),F=oe({name:"PillsInputField",classes:et,props:s,className:l,style:i,classNames:o,styles:n,unstyled:c,rootSelector:"field"}),E=y||(u==null?void 0:u.disabled);return p.createElement(he,Wa(ze(ze({component:"input",ref:Xt(e,u==null?void 0:u.fieldRef),"data-type":f,disabled:E,mod:{disabled:E,pointer:g}},F("field")),d),{id:(N==null?void 0:N.inputId)||P,"aria-invalid":u==null?void 0:u.hasError,"aria-describedby":N==null?void 0:N.describedBy}))});be.classes=et;be.displayName="@mantine/core/PillsInputField";var Qa=Object.defineProperty,Ja=Object.defineProperties,Xa=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,Ae=(t,e,s)=>e in t?Qa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Za=(t,e)=>{for(var s in e||(e={}))st.call(e,s)&&Ae(t,s,e[s]);if(re)for(var s of re(e))rt.call(e,s)&&Ae(t,s,e[s]);return t},es=(t,e)=>Ja(t,Xa(e)),ts=(t,e)=>{var s={};for(var r in t)st.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&re)for(var r of re(t))e.indexOf(r)<0&&rt.call(t,r)&&(s[r]=t[r]);return s};const as={},le=q((t,e)=>{const r=W("PillsInput",as,t),{children:o,onMouseDown:l,onClick:i,size:n,disabled:c,__staticSelector:O,error:f,variant:y}=r,P=ts(r,["children","onMouseDown","onClick","size","disabled","__staticSelector","error","variant"]),g=H.useRef();return p.createElement(Ea,{value:{fieldRef:g,size:n,disabled:c,hasError:!!f,variant:y}},p.createElement(He,es(Za({size:n,error:f,variant:y,component:"div",ref:e,onMouseDown:d=>{var u;d.preventDefault(),l==null||l(d),(u=g.current)==null||u.focus()},onClick:d=>{var u;d.preventDefault(),i==null||i(d),(u=g.current)==null||u.focus()}},P),{multiline:!0,disabled:c,__staticSelector:O||"PillsInput",withAria:!1}),o))});le.displayName="@mantine/core/PillsInput";le.Field=be;var ss=Object.defineProperty,rs=Object.defineProperties,ls=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Ve=(t,e,s)=>e in t?ss(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,j=(t,e)=>{for(var s in e||(e={}))lt.call(e,s)&&Ve(t,s,e[s]);if(ne)for(var s of ne(e))nt.call(e,s)&&Ve(t,s,e[s]);return t},Y=(t,e)=>rs(t,ls(e)),Ke=(t,e)=>{var s={};for(var r in t)lt.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&ne)for(var r of ne(t))e.indexOf(r)<0&&nt.call(t,r)&&(s[r]=t[r]);return s};const ns={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left"},je=q((t,e)=>{const s=W("MultiSelect",ns,t),r=s,{classNames:o,className:l,style:i,styles:n,unstyled:c,vars:O,size:f,value:y,defaultValue:P,onChange:g,onKeyDown:d,variant:u,data:N,dropdownOpened:F,defaultDropdownOpened:E,onDropdownOpen:k,onDropdownClose:R,selectFirstOptionOnChange:$,onOptionSubmit:z,comboboxProps:A,filter:S,limit:D,withScrollArea:ct,maxDropdownHeight:dt,searchValue:pt,defaultSearchValue:ut,onSearchChange:mt,readOnly:V,disabled:B,onFocus:ye,onBlur:Pe,onPaste:js,radius:ht,rightSection:xt,rightSectionWidth:ft,rightSectionPointerEvents:gt,rightSectionProps:vt,leftSection:bt,leftSectionWidth:jt,leftSectionPointerEvents:yt,leftSectionProps:Pt,inputContainer:_t,inputWrapperOrder:wt,withAsterisk:Nt,labelProps:St,descriptionProps:It,errorProps:Ot,wrapperProps:Dt,description:Ct,label:Et,error:_e,maxValues:kt,searchable:_,nothingFoundMessage:we,withCheckIcon:$t,checkIconPosition:Bt,hidePickedOptions:Ne,withErrorStyles:Tt,name:Mt,form:Ft,id:Rt,clearable:zt,clearButtonProps:At,hiddenInputProps:Vt,placeholder:Se}=r,Kt=Ke(r,["classNames","className","style","styles","unstyled","vars","size","value","defaultValue","onChange","onKeyDown","variant","data","dropdownOpened","defaultDropdownOpened","onDropdownOpen","onDropdownClose","selectFirstOptionOnChange","onOptionSubmit","comboboxProps","filter","limit","withScrollArea","maxDropdownHeight","searchValue","defaultSearchValue","onSearchChange","readOnly","disabled","onFocus","onBlur","onPaste","radius","rightSection","rightSectionWidth","rightSectionPointerEvents","rightSectionProps","leftSection","leftSectionWidth","leftSectionPointerEvents","leftSectionProps","inputContainer","inputWrapperOrder","withAsterisk","labelProps","descriptionProps","errorProps","wrapperProps","description","label","error","maxValues","searchable","nothingFoundMessage","withCheckIcon","checkIconPosition","hidePickedOptions","withErrorStyles","name","form","id","clearable","clearButtonProps","hiddenInputProps","placeholder"]),ce=Zt(Rt),de=fa(N),Q=ga(de),b=va({opened:F,defaultOpened:E,onDropdownOpen:k,onDropdownClose:()=>{R==null||R(),b.resetSelectedOption()}}),{styleProps:Lt,rest:Yt}=ea(Kt),Gt=Yt,qt=Ke(Gt,["type"]),[x,K]=ke({value:y,defaultValue:P,finalValue:[],onChange:g}),[J,X]=ke({value:pt,defaultValue:ut,finalValue:"",onChange:mt}),pe=oe({name:"MultiSelect",classes:{},props:s,classNames:o,styles:n,unstyled:c}),{resolvedClassNames:Ie,resolvedStyles:Oe}=ta({props:s,styles:n,classNames:o}),Wt=m=>{d==null||d(m),m.key==="Backspace"&&J.length===0&&x.length>0&&K(x.slice(0,x.length-1))},Ht=x.map((m,ue)=>{var Ee;return p.createElement(G,j({key:`${m}-${ue}`,withRemoveButton:!V,onRemove:()=>K(x.filter(Ut=>m!==Ut)),unstyled:c},pe("pill")),((Ee=Q[m])==null?void 0:Ee.label)||m)});H.useEffect(()=>{$&&b.selectFirstOption()},[$,x]);const De=zt&&x.length>0&&!B&&!V&&p.createElement(T.ClearButton,Y(j({size:f},At),{onClear:()=>{K([]),X("")}})),Ce=Oa({data:de,value:x});return p.createElement(p.Fragment,null,p.createElement(T,j({store:b,classNames:Ie,styles:Oe,unstyled:c,size:f,readOnly:V,__staticSelector:"MultiSelect",onOptionSubmit:m=>{z==null||z(m),X(""),b.updateSelectedOptionIndex("selected"),x.includes(Q[m].value)?K(x.filter(ue=>ue!==Q[m].value)):x.length<kt&&K([...x,Q[m].value])}},A),p.createElement(T.DropdownTarget,null,p.createElement(le,Y(j({},Lt),{__staticSelector:"MultiSelect",classNames:Ie,styles:Oe,unstyled:c,size:f,className:l,style:i,variant:u,disabled:B,radius:ht,rightSection:xt||De||p.createElement(T.Chevron,{size:f,error:_e,unstyled:c}),rightSectionPointerEvents:gt||De?"all":"none",rightSectionWidth:ft,rightSectionProps:vt,leftSection:bt,leftSectionWidth:jt,leftSectionPointerEvents:yt,leftSectionProps:Pt,inputContainer:_t,inputWrapperOrder:wt,withAsterisk:Nt,labelProps:St,descriptionProps:It,errorProps:Ot,wrapperProps:Dt,description:Ct,label:Et,error:_e,multiline:!0,withErrorStyles:Tt,__stylesApiProps:Y(j({},s),{multiline:!0}),pointer:!_,onClick:()=>_?b.openDropdown():b.toggleDropdown(),id:ce}),p.createElement(G.Group,j({disabled:B,unstyled:c},pe("pillsList")),Ht,p.createElement(T.EventsTarget,null,p.createElement(le.Field,Y(j(Y(j({},qt),{ref:e,id:ce,placeholder:Se,type:!_&&!Se?"hidden":"visible"}),pe("inputField")),{unstyled:c,onFocus:m=>{ye==null||ye(m),_&&b.openDropdown()},onBlur:m=>{Pe==null||Pe(m),b.closeDropdown(),_&&b.closeDropdown(),X("")},onKeyDown:Wt,value:J,onChange:m=>{X(m.currentTarget.value),_&&b.openDropdown(),$&&b.selectFirstOption()},disabled:B,readOnly:V||!_,pointer:!_})))))),p.createElement(ba,{data:Ne?Ce:de,hidden:V||B,filter:S,search:J,limit:D,hiddenWhenEmpty:!_||!we||Ne&&Ce.length===0&&J.trim().length===0,withScrollArea:ct,maxDropdownHeight:dt,filterOptions:_,value:x,checkIconPosition:Bt,withCheckIcon:$t,nothingFoundMessage:we,unstyled:c,labelId:`${ce}-label`})),p.createElement("input",j({type:"hidden",name:Mt,value:x.join(","),form:Ft,disabled:B},Vt)))});je.classes=j(j({},He.classes),T.classes);je.displayName="@mantine/core/MultiSelect";async function os({params:t}){return(await U.get("/ar-service/engineer",{params:t})).data.data}function is({config:t,params:e}={}){return xe({...t,queryKey:["engineers",e],queryFn:()=>os({params:e}),keepPreviousData:!0})}const cs=({...t})=>{const{data:e}=is({params:{limit:5e5}}),s=H.useMemo(()=>e?e.data.map(({id:r,name:o})=>({label:o,value:r.toString()})):[],[e]);return a.jsx(je,{...t,data:s,searchable:!0})};async function ds({data:t}){const e=new FormData;for(const[r,o]of Object.entries(t))o&&(Array.isArray(o)?typeof o[0]=="string"?o.forEach((l,i)=>{e.append(`${r}[${i}]`,l.toString())}):o.forEach((l,i)=>{for(const[n,c]of Object.entries(l))e.append(`${n}[${i}]`,c.toString())}):o instanceof Date?e.append(r,o.toJSON()):o instanceof File?e.append(r,o,o.name):e.append(r,o.toString()));return(await U.post("/ar-service/install-base",e)).data}function ot({config:t}={}){return Ye(ds,{...t,onSuccess:(...e)=>{Ge.invalidateQueries(["installations"]),t!=null&&t.onSuccess&&t.onSuccess(...e)}})}async function ps({params:t}){return(await U.get("/ar-service/install-base",{params:t})).data.data}function it({config:t,params:e}={}){return xe({...t,queryKey:["installations",e],queryFn:()=>ps({params:e}),keepPreviousData:!0})}async function us({id:t}){return(await U.get(`/ar-service/install-base/${t}`)).data.data}function ms({config:t,id:e}){return xe({...t,queryKey:["installation",e],queryFn:()=>us({id:e})})}async function hs({id:t}){return(await U.delete(`/ar-service/install-base/${t}`)).data}function xs({config:t}={}){return Ye(hs,{...t,onSuccess:(...e)=>{Ge.invalidateQueries(["installations"]),t!=null&&t.onSuccess&&t.onSuccess(...e)}})}const fs={page:1,limit:10,search:""},gs=({toolbar:t})=>{const[e,s]=H.useState(fs),{data:r,isLoading:o}=it({params:e}),l=xs();function i(n){return()=>{me.openConfirmModal({title:"Hapus Install Base",children:a.jsx("div",{className:"text-sm",children:"Apakah anda yakin untuk menghapus install Base ini?"}),centered:!0,closeOnConfirm:!1,onConfirm:async()=>{await l.mutateAsync({id:n},{onSuccess:()=>{C.show({message:"Install Base berhasil dihapus",color:"green",icon:a.jsx(pa,{})}),me.closeAll()},onError:()=>{C.show({message:"Install Base tidak bisa dihapus",color:"red",icon:a.jsx(sa,{})}),me.closeAll()}})}})}}return a.jsx(la,{title:"Tabel Data Install Base",toolbar:t,header:["#","Project Number","Nama Kegiatan","Produk","Rumah Sakit","Diperbaharui",""],items:r==null?void 0:r.data,onPageChange:n=>{s({...e,page:n})},loading:o,metadata:{count:(r==null?void 0:r.data.length)||10,limit:e.limit||10,page:e.page||10,total:(r==null?void 0:r.total)||10},renderItem:(n,c)=>a.jsxs("tr",{children:[a.jsx("td",{children:(e.limit??5)*((e.page??0)-1)+c+1}),a.jsx("td",{children:n.project_number}),a.jsx("td",{children:n.title}),a.jsx("td",{children:n.items.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs text-primary-600",children:na[n.items[0].product.type]}),a.jsx("div",{className:"text-sm text-gray-900",children:n.items[0].product.name}),n.items.length>1&&a.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["+ ",n.items.length-1," produk lainnya"]})]})}),a.jsx("td",{children:n.customer.name}),a.jsx("td",{children:qe(n.updatedAt).format("D MMMM YYYY H:mm")}),a.jsx("td",{children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($e,{variant:"subtle",component:M,to:`/installation/${n.id}`,title:"Detail Install Base",color:"primary",radius:"lg",children:a.jsx(ca,{size:18})}),a.jsx(aa,{role:["Superadmin","Admin"],children:a.jsx($e,{variant:"subtle",onClick:i(n.id),title:"Hapus Install Base",color:"red",radius:"lg",children:a.jsx(da,{size:18})})})]})})]},n.id)})},vs=({value:t,onChange:e})=>{function s(){e([...t,{product_id:"",serial_number:"",warranty_month:""}])}function r(l){return()=>{const i=t.filter((n,c)=>c!==l);e(i)}}function o(l,i){e(t.map((n,c)=>c===l?i:n))}return a.jsxs("div",{children:[a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 mb-1",children:[a.jsx("div",{className:"col-span-4 text-sm",children:"Produk"}),a.jsx("div",{className:"col-span-4 text-sm",children:"Serial Number"}),a.jsx("div",{className:"col-span-4 text-sm",children:"Masa Garansi"}),a.jsx("div",{className:"col-span-1 text-sm"})]}),t.map((l,i)=>a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 gap-y-2 mb-2",children:[a.jsx(Pa,{required:!0,placeholder:"Pilih Produk",className:"col-span-4",limit:20,nothingFoundMessage:"Data tidak ditemukan",value:l.product_id,onChange:n=>{n&&o(i,{...l,product_id:n})}}),a.jsx(I,{required:!0,placeholder:"Ex : MU/23/09/001",className:"col-span-4",value:l.serial_number,onChange:n=>o(i,{...l,serial_number:n.target.value})}),a.jsx(_a,{required:!0,placeholder:"...",className:"col-span-3",hideControls:!0,value:l.warranty_month,onChange:n=>o(i,{...l,warranty_month:n}),rightSection:a.jsx("span",{className:"text-xs text-gray-600 pr-7",children:"/bulan"})}),a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx(w,{color:"red",size:"xs",variant:"light",onClick:r(i),children:"Hapus"})})]},`psf_${i}`)),a.jsx("div",{className:"col-span-12 flex justify-end",children:a.jsx(w,{leftSection:a.jsx(Na,{size:16}),variant:"subtle",size:"xs",onClick:s,children:"Tambah Produk"})})]})},bs=()=>{var l;const t=fe(),{mutateAsync:e,isLoading:s}=ot(),r=Ue({initialValues:{title:"",customer_id:void 0,engineer_ids:[],installation_date:null,note:"",project_number:"",serial_number:"",warranty_month:0,file:void 0,products:[{product_id:"",serial_number:"",warranty_month:""}]}}),o=r.onSubmit(async i=>{await e({data:{...i}},{onSuccess:()=>{C.show({color:"green",message:"Install Base berhasil dibuat"}),t("/installation")},onError:({response:n})=>{r.setErrors((n==null?void 0:n.data).errors),C.show({color:"red",message:"Install Base gagal dibuat"})}})});return a.jsxs(v,{component:"form",onSubmit:o,shadow:"lg",children:[a.jsx(v.Section,{p:"lg",withBorder:!0,children:a.jsx("h2",{className:"font-semibold text-base",children:"Tambah Data Install Base"})}),a.jsxs(v.Section,{p:"lg",pt:"xs",withBorder:!0,children:[a.jsxs("div",{className:"pb-6 grid grid-cols-12 gap-x-6 gap-y-4 border-b border-gray-300",children:[a.jsx(oa,{...r.getInputProps("installation_date"),label:"Tanggal Install",placeholder:"Pilih Tanggal",className:"col-span-6 md:col-span-3",popoverProps:{withinPortal:!0},rightSection:a.jsx(ia,{size:16,color:"gray"}),valueFormat:"D MMMM YYYY"}),a.jsx(I,{...r.getInputProps("project_number"),label:"Project Number",placeholder:"Ex : 20392",className:"col-span-6 md:col-span-3"}),a.jsx(I,{...r.getInputProps("title"),label:"Nama Kegiatan",placeholder:"Ex : Perbaikan Alat MINDRAY xxxx",className:"col-span-12 md:col-span-6"}),a.jsx(ma,{...r.getInputProps("customer_id"),label:"Instansi",placeholder:"Pilih Instansi",className:"col-span-12 md:col-span-12",limit:5,nothingFoundMessage:"Data tidak ditemukan"}),a.jsx(cs,{...r.getInputProps("engineer_ids"),label:"Teknisi",placeholder:"Pilih Teknisi",className:"col-span-12 md:col-span-12",limit:20,nothingFoundMessage:"Data tidak ditemukan"})]}),a.jsx("div",{className:"pt-2 pb-4 border-b border-gray-300",children:a.jsx(vs,{value:r.values.products,onChange:i=>r.setFieldValue("products",i)})}),a.jsxs("div",{className:"pt-4 grid grid-cols-12 gap-x-6 gap-y-4",children:[a.jsx("div",{className:"col-span-12",children:a.jsx(ha,{label:"File Kegiatan",onDrop:i=>r.setFieldValue("file",i[0]||void 0),onReject:()=>C.show({message:"File tidak sesuai",color:"red"}),maxSize:5*1024**2,maxFiles:1,value:r.values.file,error:(l=r.errors.file)==null?void 0:l.toString()})}),a.jsx(wa,{...r.getInputProps("note"),label:"Catatan",placeholder:"Tambahkan Catatan. . .",className:"col-span-12 md:col-span-12"})]})]}),a.jsxs(v.Section,{p:"lg",withBorder:!0,className:"flex items-center space-x-4",children:[a.jsx(w,{type:"submit",loading:s,children:"Simpan"}),a.jsx(w,{component:M,to:"/installation",variant:"light",color:"gray.6",bg:"gray.2",children:"Batal"})]})]})},Ls=()=>{const t=fe(),{mutateAsync:e}=ot(),s=Ue({initialValues:{title:"",products:[]}}),r=s.onSubmit(async o=>{await e({data:{...o}},{onSuccess:()=>{C.show({color:"green",message:"Instansi berhasil diubah"}),t("/installation")},onError:({response:l})=>{s.setErrors((l==null?void 0:l.data).errors),C.show({color:"red",message:"Instansi gagal diubah"})}})});return a.jsxs(v,{component:"form",onSubmit:r,shadow:"lg",children:[a.jsx(v.Section,{p:"lg",withBorder:!0,children:a.jsx("h2",{className:"font-semibold text-base",children:"Edit Data Instansi"})}),a.jsxs(v.Section,{p:"lg",pt:"xs",children:[a.jsxs("div",{className:"pb-6 grid grid-cols-12 gap-x-6 gap-y-4 border-b border-gray-300",children:[a.jsx(I,{...s.getInputProps("hospital_code"),label:"Kode RS",placeholder:"Ex : 20392",className:"col-span-12 md:col-span-4"}),a.jsx(I,{...s.getInputProps("name"),label:"Nama Instansi",placeholder:"Ex : RS Umum Daerah H. Sahudin Kutacane. . .",className:"col-span-12 md:col-span-8"}),a.jsx(Z,{...s.getInputProps("sector"),label:"Sektor",placeholder:"Pilih Sektor",data:["Private","Public"],className:"col-span-12 md:col-span-4"}),a.jsx(Z,{...s.getInputProps("classes"),label:"Kelas",placeholder:"Pilih Kelas",data:["A","B","C","D","D Pratama"],className:"col-span-12 md:col-span-4"}),a.jsx(Z,{...s.getInputProps("owner"),label:"Kepemilikan",placeholder:"Pilih Kepemilikan",data:["Perorangan","Korporasi","Negara"],className:"col-span-12 md:col-span-4"})]}),a.jsxs("div",{className:"pt-4 grid grid-cols-12 gap-x-6 gap-y-4",children:[a.jsx(I,{...s.getInputProps("address"),label:"Alamat",placeholder:"Ex : Jl. Sultan Adam No. 24",className:"col-span-12 md:col-span-8"}),a.jsx(I,{...s.getInputProps("phone_number"),label:"Telepon",placeholder:"Ex : 085752140605. . .",className:"col-span-12 md:col-span-4"}),a.jsx(I,{...s.getInputProps("email"),label:"Email",placeholder:"Masukan Email",className:"col-span-12 md:col-span-6"}),a.jsx(Ia,{...s.getInputProps("password"),label:"Password",placeholder:"Biarkan kosong jika tidak berubah",className:"col-span-12 md:col-span-6"})]})]}),a.jsxs(v.Section,{p:"lg",withBorder:!0,className:"flex justify-end items-center space-x-4",children:[a.jsx(w,{component:M,to:"/installation",variant:"light",color:"gray.6",bg:"gray.2",children:"Batal"}),a.jsx(w,{type:"submit",children:"Simpan"})]})]})},Ys=({...t})=>{const{data:e}=it({params:{limit:5e5}}),s=H.useMemo(()=>e?e.data.map(({id:r,title:o,project_number:l})=>({label:`${o} (${l})`,value:r.toString()})):[],[e]);return a.jsx(Z,{...t,data:s,searchable:!0})},Gs=()=>a.jsxs("main",{children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Data Install Base"}),a.jsx(w,{component:M,to:"/installation/create",children:"Tambah"})]}),a.jsx("section",{className:"mb-8",children:a.jsx(gs,{})})]}),qs=()=>a.jsxs("main",{children:[a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Data Install Base"})}),a.jsx(bs,{})]}),Ws=()=>{const{id:t}=ra(),{data:e,isLoading:s,isError:r}=ms({id:t}),o=fe();return s?a.jsx("div",{className:"mt-48",children:a.jsx(ua,{})}):r?a.jsxs("div",{className:"mt-48 text-center",children:[a.jsx("h1",{className:"text-lg font-bold mb-2",children:"Install base tidak ditemukan"}),a.jsx(w,{onClick:()=>o(-1),leftSection:a.jsx(ja,{size:14}),children:"Kembali"})]}):a.jsxs("main",{children:[a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Detail Install Base"})}),a.jsxs(v,{shadow:"lg",children:[a.jsx(v.Section,{p:"lg",withBorder:!0,children:a.jsxs("h2",{className:"font-semibold text-base",children:["Instalasi Alat Rumah Sakit (",e.project_number,")"]})}),a.jsxs(v.Section,{p:"lg",withBorder:!0,children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Project Number"}),a.jsx("div",{className:"font-bold text-sm text-gray-900",children:e.project_number})]}),a.jsxs("div",{className:"",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Nama Kegiatan"}),a.jsx("div",{className:"font-bold text-sm text-gray-900",children:e.title})]}),a.jsxs("div",{className:"",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Instansi"}),a.jsx("div",{className:"font-bold text-sm text-gray-900",children:e.customer.name})]}),a.jsxs("div",{className:"",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Tanggal Install"}),a.jsx("div",{className:"font-bold text-sm text-gray-900",children:e.installation_date})]}),a.jsxs("div",{className:"",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Teknisi"}),a.jsx("div",{className:"font-bold text-sm text-gray-900",children:e.technical_contract.engineers.map(({name:l})=>l).join(", ")})]}),a.jsxs("div",{className:"",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"File"}),a.jsx("div",{className:"font-bold text-sm text-gray-900",children:e.file?a.jsxs(M,{to:e.file,target:"_blank",className:"flex items-center text-sm text-primary-600 line-clamp-1",children:[a.jsx(Sa,{size:16,className:"flex-shrink-0"}),a.jsx("span",{className:"ml-2",children:"View/Download"})]}):"-"})]})]}),a.jsxs(h,{withColumnBorders:!0,withRowBorders:!0,withTableBorder:!0,children:[a.jsx(h.Thead,{children:a.jsxs(h.Tr,{children:[a.jsx(h.Th,{children:"#"}),a.jsx(h.Th,{children:"Serial Number"}),a.jsx(h.Th,{children:"Nama Alat"}),a.jsx(h.Th,{children:"Merek"}),a.jsx(h.Th,{children:"Masa Garansi"}),a.jsx(h.Th,{children:"Waktu Preventive"})]})}),a.jsx(h.Tbody,{children:e.items.map((l,i)=>{var n;return a.jsxs(h.Tr,{children:[a.jsx(h.Td,{children:i+1}),a.jsx(h.Td,{children:l.serial_number}),a.jsx(h.Td,{children:l.product.name}),a.jsx(h.Td,{children:((n=l.product.brand)==null?void 0:n.name)??"[Tanpa Merk]"}),a.jsxs(h.Td,{children:[l.warranty_month," Bulan"]}),a.jsx(h.Td,{children:qe(e.installation_date).add(l.warranty_month,"M").format("dddd, D MMMM YYYY")})]},l.id)})})]})]}),a.jsx(v.Section,{p:"lg",withBorder:!0,children:a.jsx(w,{component:M,to:"/installation",variant:"light",color:"gray.6",bg:"gray.2",children:"Kembali"})})]})]})};export{qs as InstallationCreate,bs as InstallationCreateForm,Ws as InstallationDetail,Ys as InstallationSelect,gs as InstallationTable,Ls as InstallationUpdateForm,Gs as Installations,Qs as ItemSelect};

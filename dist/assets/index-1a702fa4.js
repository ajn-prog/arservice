import{r as h,_ as ga,y as va,k as $e,t as ut,v as pt,w as ft,R as x,l as S,o as E,z as xa,p as Qe,D as ba,x as Xe,E as Ce,F as ya,u as mt,q as ht,a as be,h as gt,j as n,f as Ze,L as Be,m as Ne,n as te,I as Ee,g as Sa,G as Je,B as Re}from"./index-cfc5752b.js";import{D as wa,u as _a,g as Pa,c as De,d as Ia,e as ja,f as Oa,T as Ca,I as Na,a as Da,b as za}from"./Table-56d81558.js";import{d as ka}from"./dayjs-39ed333d.js";import{P as Ea,D as Ra,I as $a,N as Ba,a as V,b as me}from"./ProductSelect-a45a6d18.js";import{A as Fa}from"./AgencySelect-12b0c7e1.js";import{I as oe,u as Ma,C as he,T as ze}from"./use-form-84ce6720.js";var Ta=h.useLayoutEffect,La=function(t){var a=h.useRef(t);return Ta(function(){a.current=t}),a},et=function(t,a){if(typeof t=="function"){t(a);return}t.current=a},Va=function(t,a){var r=h.useRef();return h.useCallback(function(o){t.current=o,r.current&&et(r.current,null),r.current=a,a&&et(a,o)},[a])},tt={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},at=function(t){Object.keys(tt).forEach(function(a){t.style.setProperty(a,tt[a],"important")})},I=null,Aa=function(t,a){var r=t.scrollHeight;return a.sizingStyle.boxSizing==="border-box"?r+a.borderSize:r-a.paddingSize};function Ha(e,t,a,r){a===void 0&&(a=1),r===void 0&&(r=1/0),I||(I=document.createElement("textarea"),I.setAttribute("tabindex","-1"),I.setAttribute("aria-hidden","true"),at(I)),I.parentNode===null&&document.body.appendChild(I);var o=e.paddingSize,l=e.borderSize,u=e.sizingStyle,c=u.boxSizing;Object.keys(u).forEach(function(C){var D=C;I.style[D]=u[D]}),at(I),I.value=t;var i=Aa(I,e);I.value="x";var p=I.scrollHeight-o,f=p*a;c==="border-box"&&(f=f+o+l),i=Math.max(f,i);var g=p*r;return c==="border-box"&&(g=g+o+l),i=Math.min(g,i),[i,p]}var rt=function(){},Wa=function(t,a){return t.reduce(function(r,o){return r[o]=a[o],r},{})},Ya=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],qa=!!document.documentElement.currentStyle,Ka=function(t){var a=window.getComputedStyle(t);if(a===null)return null;var r=Wa(Ya,a),o=r.boxSizing;if(o==="")return null;qa&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var l=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),u=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:l,borderSize:u}},Ua=function(t){var a=La(t);h.useLayoutEffect(function(){var r=function(l){a.current(l)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},Ga=function(t,a){var r=t.cacheMeasurements,o=t.maxRows,l=t.minRows,u=t.onChange,c=u===void 0?rt:u,i=t.onHeightChange,p=i===void 0?rt:i,f=ga(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),g=f.value!==void 0,C=h.useRef(null),D=Va(C,a),w=h.useRef(0),_=h.useRef(),F=function(){var z=C.current,A=r&&_.current?_.current:Ka(z);if(A){_.current=A;var G=Ha(A,z.value||z.placeholder||"x",l,o),H=G[0],Q=G[1];w.current!==H&&(w.current=H,z.style.setProperty("height",H+"px","important"),p(H,{rowHeight:Q}))}},U=function(z){g||F(),c(z)};return h.useLayoutEffect(F),Ua(F),h.createElement("textarea",va({},f,{onChange:U,ref:D}))},Qa=h.forwardRef(Ga);const Xa=Qa;var Za=$e(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const Ja=Za;var er=Object.defineProperty,tr=Object.defineProperties,ar=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable,nt=(e,t,a)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,J=(e,t)=>{for(var a in t||(t={}))vt.call(t,a)&&nt(e,a,t[a]);if(ge)for(var a of ge(t))xt.call(t,a)&&nt(e,a,t[a]);return e},ke=(e,t)=>tr(e,ar(t)),rr=(e,t)=>{var a={};for(var r in e)vt.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&ge)for(var r of ge(e))t.indexOf(r)<0&&xt.call(e,r)&&(a[r]=e[r]);return a};const nr={autosize:!1,size:"sm",__staticSelector:"Textarea"},bt=h.forwardRef((e,t)=>{const a=ut("Textarea",nr,e),{autosize:r,maxRows:o,minRows:l,label:u,error:c,description:i,id:p,className:f,required:g,style:C,wrapperProps:D,classNames:w,styles:_,size:F,__staticSelector:U,sx:ae,errorProps:z,descriptionProps:A,labelProps:G,inputWrapperOrder:H,inputContainer:Q,unstyled:re,withAsterisk:le,variant:P}=a,ye=rr(a,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk","variant"]),ie=pt(p),{classes:Se,cx:we}=Ja(),{systemStyles:ce,rest:_e}=ft(ye),R=J({required:g,ref:t,error:c,id:ie,classNames:ke(J({},w),{input:we(Se.input,w==null?void 0:w.input)}),styles:_,__staticSelector:U,size:F,multiline:!0,unstyled:re,variant:P},_e);return x.createElement(oe.Wrapper,J(J({label:u,error:c,id:ie,description:i,required:g,style:C,className:f,classNames:w,styles:_,size:F,__staticSelector:U,sx:ae,errorProps:z,labelProps:G,descriptionProps:A,inputContainer:Q,inputWrapperOrder:H,unstyled:re,withAsterisk:le,variant:P},ce),D),r?x.createElement(oe,ke(J({},R),{component:Xa,maxRows:o,minRows:l})):x.createElement(oe,ke(J({},R),{component:"textarea",rows:l})))});bt.displayName="@mantine/core/Textarea";const yt={xs:S(16),sm:S(22),md:S(26),lg:S(30),xl:S(36)},sr={xs:S(10),sm:S(12),md:S(14),lg:S(16),xl:S(18)};var or=$e((e,{disabled:t,radius:a,readOnly:r},{size:o,variant:l})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:t?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:l==="filled"?e.white:e.colors.gray[1],color:t?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:E({size:o,sizes:yt}),paddingLeft:`calc(${E({size:o,sizes:e.spacing})} / 1.5)`,paddingRight:t||r?E({size:o,sizes:e.spacing}):0,fontWeight:500,fontSize:E({size:o,sizes:sr}),borderRadius:E({size:a,sizes:e.radius}),cursor:t?"not-allowed":"default",userSelect:"none",maxWidth:`calc(100% - ${S(10)})`},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:`calc(${E({size:o,sizes:e.spacing})} / 6)`},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const lr=or;var ir=Object.defineProperty,ve=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,st=(e,t,a)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,cr=(e,t)=>{for(var a in t||(t={}))St.call(t,a)&&st(e,a,t[a]);if(ve)for(var a of ve(t))wt.call(t,a)&&st(e,a,t[a]);return e},dr=(e,t)=>{var a={};for(var r in e)St.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&ve)for(var r of ve(e))t.indexOf(r)<0&&wt.call(e,r)&&(a[r]=e[r]);return a};const ur={xs:16,sm:22,md:24,lg:26,xl:30};function _t(e){var t=e,{label:a,classNames:r,styles:o,className:l,onRemove:u,disabled:c,readOnly:i,size:p,radius:f="sm",variant:g,unstyled:C}=t,D=dr(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant","unstyled"]);const{classes:w,cx:_}=lr({disabled:c,readOnly:i,radius:f},{name:"MultiSelect",classNames:r,styles:o,unstyled:C,size:p,variant:g});return x.createElement("div",cr({className:_(w.defaultValue,l)},D),x.createElement("span",{className:w.defaultValueLabel},a),!c&&!i&&x.createElement(xa,{"aria-hidden":!0,onMouseDown:u,size:ur[p],radius:2,color:"blue",variant:"transparent",iconSize:"70%",className:w.defaultValueRemove,tabIndex:-1,unstyled:C}))}_t.displayName="@mantine/core/MultiSelect/DefaultValue";function pr({data:e,searchable:t,limit:a,searchValue:r,filter:o,value:l,disableSelectedItemFiltering:u}){if(!t&&l.length===0)return e;if(!t){const i=[];for(let p=0;p<e.length;p+=1)(u||!l.some(f=>f===e[p].value&&!e[p].disabled))&&i.push(e[p]);return i}const c=[];for(let i=0;i<e.length&&(o(r,!u&&l.some(p=>p===e[i].value&&!e[i].disabled),e[i])&&c.push(e[i]),!(c.length>=a));i+=1);return c}var fr=Object.defineProperty,mr=Object.defineProperties,hr=Object.getOwnPropertyDescriptors,ot=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,lt=(e,t,a)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,xr=(e,t)=>{for(var a in t||(t={}))gr.call(t,a)&&lt(e,a,t[a]);if(ot)for(var a of ot(t))vr.call(t,a)&&lt(e,a,t[a]);return e},br=(e,t)=>mr(e,hr(t)),yr=$e((e,{invalid:t},{size:a})=>({wrapper:{position:"relative"},values:{minHeight:`calc(${E({size:a,sizes:Qe})} - ${S(2)})`,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(-${e.spacing.xs} / 2)`,boxSizing:"border-box","&[data-clearable]":{marginRight:E({size:a,sizes:Qe})}},value:{margin:`calc(${e.spacing.xs} / 2 - ${S(2)}) calc(${e.spacing.xs} / 2)`},searchInput:br(xr({},e.fn.fontStyles()),{flex:1,minWidth:S(60),backgroundColor:"transparent",border:0,outline:0,fontSize:E({size:a,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs} / 2)`,appearance:"none",color:"inherit",maxHeight:E({size:a,sizes:yt}),"&::placeholder":{opacity:1,color:t?e.colors.red[e.fn.primaryShade()]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,minWidth:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}}));const Sr=yr;var wr=Object.defineProperty,_r=Object.defineProperties,Pr=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,it=(e,t,a)=>t in e?wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ee=(e,t)=>{for(var a in t||(t={}))Pt.call(t,a)&&it(e,a,t[a]);if(xe)for(var a of xe(t))It.call(t,a)&&it(e,a,t[a]);return e},ct=(e,t)=>_r(e,Pr(t)),Ir=(e,t)=>{var a={};for(var r in e)Pt.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&xe)for(var r of xe(e))t.indexOf(r)<0&&It.call(e,r)&&(a[r]=e[r]);return a};function jr(e,t,a){return t?!1:a.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Or(e,t){return!!e&&!t.some(a=>a.value.toLowerCase()===e.toLowerCase())}function dt(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const a=t.map(r=>typeof r=="object"?r.value:r);return e.filter(r=>a.includes(r))}const Cr={size:"sm",valueComponent:_t,itemComponent:wa,transitionProps:{transition:"fade",duration:0},maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:jr,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:Or,switchDirectionOnFlip:!1,zIndex:ba("popover"),selectOnBlur:!1,positionDependencies:[],dropdownPosition:"flip"},jt=h.forwardRef((e,t)=>{const a=ut("MultiSelect",Cr,e),{className:r,style:o,required:l,label:u,description:c,size:i,error:p,classNames:f,styles:g,wrapperProps:C,value:D,defaultValue:w,data:_,onChange:F,valueComponent:U,itemComponent:ae,id:z,transitionProps:A,maxDropdownHeight:G,shadow:H,nothingFound:Q,onFocus:re,onBlur:le,searchable:P,placeholder:ye,filter:ie,limit:Se,clearSearchOnChange:we,clearable:ce,clearSearchOnBlur:_e,variant:R,onSearchChange:Ot,searchValue:Ct,disabled:$,initiallyOpened:Nt,radius:Fe,icon:Dt,rightSection:zt,rightSectionWidth:kt,creatable:Me,getCreateLabel:Te,shouldCreate:Et,onCreate:Le,sx:Rt,dropdownComponent:$t,onDropdownClose:Bt,onDropdownOpen:Ft,maxSelectedValues:j,withinPortal:Mt,switchDirectionOnFlip:Tt,zIndex:Lt,selectOnBlur:Vt,name:At,dropdownPosition:Ht,errorProps:Wt,labelProps:Yt,descriptionProps:qt,form:Kt,positionDependencies:Ut,onKeyDown:Ve,unstyled:ne,inputContainer:Gt,inputWrapperOrder:Qt,readOnly:W,withAsterisk:Xt,clearButtonProps:Zt,hoverOnSearchChange:Ae,disableSelectedItemFiltering:Jt}=a,ea=Ir(a,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transitionProps","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk","clearButtonProps","hoverOnSearchChange","disableSelectedItemFiltering"]),{classes:M,cx:He,theme:ta}=Sr({invalid:!!p},{name:"MultiSelect",classNames:f,styles:g,unstyled:ne,size:i,variant:R}),{systemStyles:aa,rest:ra}=ft(ea),Pe=h.useRef(),Ie=h.useRef({}),X=pt(z),[y,b]=h.useState(Nt),[na,T]=h.useState(-1),[We,sa]=h.useState("column"),[k,de]=Xe({value:Ct,defaultValue:"",finalValue:void 0,onChange:Ot}),[oa,Ye]=h.useState(!1),{scrollIntoView:ue,targetRef:qe,scrollableRef:la}=_a({duration:0,offset:5,cancelable:!1,isList:!0}),Ke=Me&&typeof Te=="function";let je=null;const ia=_.map(s=>typeof s=="string"?{label:s,value:s}:s),Oe=Pa({data:ia}),[m,Z]=Xe({value:dt(D,_),defaultValue:dt(w,_),finalValue:[],onChange:F}),N=h.useRef(!!j&&j<m.length),Ue=s=>{if(!W){const d=m.filter(O=>O!==s);Z(d),j&&d.length<j&&(N.current=!1)}},ca=s=>{de(s.currentTarget.value),!$&&!N.current&&P&&b(!0)},da=s=>{typeof re=="function"&&re(s),!$&&!N.current&&P&&b(!0)},v=pr({data:Oe,searchable:P,searchValue:k,limit:Se,filter:ie,value:m,disableSelectedItemFiltering:Jt}),Y=Math.min(na,v.length-1),Ge=(s,d,O)=>{let L=s;for(;O(L);)if(L=d(L),!v[L].disabled)return L;return s};Ce(()=>{T(Ae&&k?0:-1)},[k,Ae]),Ce(()=>{!$&&m.length>_.length&&b(!1),j&&m.length<j&&(N.current=!1),j&&m.length>=j&&(N.current=!0,b(!1))},[m]);const pe=s=>{if(!W)if(we&&de(""),m.includes(s.value))Ue(s.value);else{if(s.creatable&&typeof Le=="function"){const d=Le(s.value);typeof d<"u"&&d!==null&&Z(typeof d=="string"?[...m,d]:[...m,d.value])}else Z([...m,s.value]);m.length===j-1&&(N.current=!0,b(!1)),v.length===1&&b(!1)}},ua=s=>{typeof le=="function"&&le(s),Vt&&v[Y]&&y&&pe(v[Y]),_e&&de(""),b(!1)},pa=s=>{if(oa||(Ve==null||Ve(s),W)||s.key!=="Backspace"&&j&&N.current)return;const d=We==="column",O=()=>{T(q=>{var B;const se=Ge(q,K=>K+1,K=>K<v.length-1);return y&&(qe.current=Ie.current[(B=v[se])==null?void 0:B.value],ue({alignment:d?"end":"start"})),se})},L=()=>{T(q=>{var B;const se=Ge(q,K=>K-1,K=>K>0);return y&&(qe.current=Ie.current[(B=v[se])==null?void 0:B.value],ue({alignment:d?"start":"end"})),se})};switch(s.key){case"ArrowUp":{s.preventDefault(),b(!0),d?L():O();break}case"ArrowDown":{s.preventDefault(),b(!0),d?O():L();break}case"Enter":{s.preventDefault(),v[Y]&&y?pe(v[Y]):b(!0);break}case" ":{P||(s.preventDefault(),v[Y]&&y?pe(v[Y]):b(!0));break}case"Backspace":{m.length>0&&k.length===0&&(Z(m.slice(0,-1)),b(!0),j&&(N.current=!1));break}case"Home":{if(!P){s.preventDefault(),y||b(!0);const q=v.findIndex(B=>!B.disabled);T(q),ue({alignment:d?"end":"start"})}break}case"End":{if(!P){s.preventDefault(),y||b(!0);const q=v.map(B=>!!B.disabled).lastIndexOf(!1);T(q),ue({alignment:d?"end":"start"})}break}case"Escape":b(!1)}},fa=m.map(s=>{let d=Oe.find(O=>O.value===s&&!O.disabled);return!d&&Ke&&(d={value:s,label:s}),d}).filter(s=>!!s).map((s,d)=>x.createElement(U,ct(ee({},s),{variant:R,disabled:$,className:M.value,readOnly:W,onRemove:O=>{O.preventDefault(),O.stopPropagation(),Ue(s.value)},key:s.value,size:i,styles:g,classNames:f,radius:Fe,index:d}))),ma=s=>m.includes(s),ha=()=>{var s;de(""),Z([]),(s=Pe.current)==null||s.focus(),j&&(N.current=!1)};Ke&&Et(k,Oe)&&(je=Te(k),v.push({label:k,value:k,creatable:!0}));const fe=!W&&(v.length>0?y:y&&!!Q);return Ce(()=>{const s=fe?Ft:Bt;typeof s=="function"&&s()},[fe]),x.createElement(oe.Wrapper,ee(ee({required:l,id:X,label:u,error:p,description:c,size:i,className:r,style:o,classNames:f,styles:g,__staticSelector:"MultiSelect",sx:Rt,errorProps:Wt,descriptionProps:qt,labelProps:Yt,inputContainer:Gt,inputWrapperOrder:Qt,unstyled:ne,withAsterisk:Xt,variant:R},aa),C),x.createElement(De,{opened:fe,transitionProps:A,shadow:"sm",withinPortal:Mt,__staticSelector:"MultiSelect",onDirectionChange:sa,switchDirectionOnFlip:Tt,zIndex:Lt,dropdownPosition:Ht,positionDependencies:[...Ut,k],classNames:f,styles:g,unstyled:ne,variant:R},x.createElement(De.Target,null,x.createElement("div",{className:M.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":y&&fe?`${X}-items`:null,"aria-controls":X,"aria-expanded":y,onMouseLeave:()=>T(-1),tabIndex:-1},x.createElement("input",{type:"hidden",name:At,value:m.join(","),form:Kt,disabled:$}),x.createElement(oe,ee({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:i,variant:R,disabled:$,error:p,required:l,radius:Fe,icon:Dt,unstyled:ne,onMouseDown:s=>{var d;s.preventDefault(),!$&&!N.current&&b(!y),(d=Pe.current)==null||d.focus()},classNames:ct(ee({},f),{input:He({[M.input]:!P},f==null?void 0:f.input)})},Ia({theme:ta,rightSection:zt,rightSectionWidth:kt,styles:g,size:i,shouldClear:ce&&m.length>0,onClear:ha,error:p,disabled:$,clearButtonProps:Zt,readOnly:W})),x.createElement("div",{className:M.values,"data-clearable":ce||void 0},fa,x.createElement("input",ee({ref:ya(t,Pe),type:"search",id:X,className:He(M.searchInput,{[M.searchInputPointer]:!P,[M.searchInputInputHidden]:!y&&m.length>0||!P&&m.length>0,[M.searchInputEmpty]:m.length===0}),onKeyDown:pa,value:k,onChange:ca,onFocus:da,onBlur:ua,readOnly:!P||N.current||W,placeholder:m.length===0?ye:void 0,disabled:$,"data-mantine-stop-propagation":y,autoComplete:"off",onCompositionStart:()=>Ye(!0),onCompositionEnd:()=>Ye(!1)},ra)))))),x.createElement(De.Dropdown,{component:$t||ja,maxHeight:G,direction:We,id:X,innerRef:la,__staticSelector:"MultiSelect",classNames:f,styles:g},x.createElement(Oa,{data:v,hovered:Y,classNames:f,styles:g,uuid:X,__staticSelector:"MultiSelect",onItemHover:T,onItemSelect:pe,itemsRefs:Ie,itemComponent:ae,size:i,nothingFound:Q,isItemSelected:ma,creatable:Me&&!!je,createLabel:je,unstyled:ne,variant:R}))))});jt.displayName="@mantine/core/MultiSelect";async function Nr({data:e}){const t=new FormData;for(const[r,o]of Object.entries(e))o&&(Array.isArray(o)?o.forEach((l,u)=>{t.append(`${r}[${u}]`,l.toString())}):o instanceof Date?t.append(r,o.toJSON()):o instanceof File?t.append(r,o,o.name):t.append(r,o.toString()));return(await be.post("/ar-service/install-base",t)).data}function Dr({config:e}={}){return mt(Nr,{...e,onSuccess:(...t)=>{ht.invalidateQueries(["installations"]),e!=null&&e.onSuccess&&e.onSuccess(...t)}})}async function zr({params:e}){return(await be.get("/ar-service/install-base",{params:e})).data.data}function kr({config:e,params:t}={}){return gt({...e,queryKey:["installations",t],queryFn:()=>zr({params:t}),keepPreviousData:!0})}async function Er({id:e}){return(await be.delete(`/ar-service/install-base/${e}`)).data}function Rr({config:e}={}){return mt(Er,{...e,onSuccess:(...t)=>{ht.invalidateQueries(["installations"]),e!=null&&e.onSuccess&&e.onSuccess(...t)}})}const $r={page:1,limit:10,search:""},Br=({toolbar:e})=>{const[t,a]=h.useState($r),{data:r,isLoading:o}=kr({params:t}),l=Rr();function u(c){return()=>{Ne.openConfirmModal({title:"Hapus Install Base",children:n.jsx("div",{className:"text-sm",children:"Apakah anda yakin untuk menghapus install Base ini?"}),centered:!0,closeOnConfirm:!1,onConfirm:async()=>{await l.mutateAsync({id:c},{onSuccess:()=>{te.show({message:"Install Base berhasil dihapus",color:"green",icon:n.jsx(za,{})}),Ne.closeAll()},onError:()=>{te.show({message:"Install Base tidak bisa dihapus",color:"red",icon:n.jsx(Ee,{})}),Ne.closeAll()}})}})}}return n.jsx(Ca,{title:"Tabel Data Install Base",toolbar:e,header:["Project Number","Rumah Sakit","Produk","Diperbaharui",""],items:r==null?void 0:r.data,onPageChange:c=>{a({...t,page:c})},loading:o,metadata:{count:(r==null?void 0:r.data.length)||10,limit:t.limit||10,page:t.page||10,total:(r==null?void 0:r.total)||10},renderItem:c=>n.jsxs("tr",{children:[n.jsx("td",{children:c.project_number}),n.jsx("td",{children:c.customer.name}),n.jsx("td",{children:c.product.name}),n.jsx("td",{children:ka(c.updatedAt).format("D MMMM YYYY H:mm")}),n.jsx("td",{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ze,{component:Be,to:`/installation/${c.id}`,title:"Update Install Base",color:"primary",radius:"lg",children:n.jsx(Na,{size:18})}),n.jsx(Ze,{onClick:u(c.id),title:"Hapus Install Base",color:"red",radius:"lg",children:n.jsx(Da,{size:18})})]})})]},c.id)})};async function Fr({params:e}){return(await be.get("/ar-service/engineer",{params:e})).data.data}function Mr({config:e,params:t}={}){return gt({...e,queryKey:["engineers",t],queryFn:()=>Fr({params:t}),keepPreviousData:!0})}const Tr=({...e})=>{const{data:t}=Mr({params:{limit:0}}),a=h.useMemo(()=>t?t.data.map(({id:r,name:o})=>({label:o,value:r.toString()})):[],[t]);return n.jsx(jt,{...e,data:a,searchable:!0})},Lr=()=>{const e=Sa(),{mutateAsync:t,isLoading:a}=Dr(),r=Ma({initialValues:{title:"",customer_id:void 0,engineer_ids:[],installation_date:null,note:"",product_id:void 0,project_number:"",serial_number:"",warranty_month:0}}),o=r.onSubmit(async l=>{await t({data:{...l}},{onSuccess:()=>{te.show({color:"green",message:"Install Base berhasil dibuat"}),e("/installation")},onError:({response:u})=>{r.setErrors((u==null?void 0:u.data).errors),te.show({color:"red",message:"Install Base gagal dibuat"})}})});return n.jsxs(he,{component:"form",onSubmit:o,shadow:"lg",children:[n.jsx(he.Section,{p:"lg",withBorder:!0,children:n.jsx("h2",{className:"font-semibold text-base",children:"Tambah Data Install Base"})}),n.jsxs(he.Section,{p:"lg",pt:"xs",children:[n.jsxs("div",{className:"pb-6 grid grid-cols-12 gap-x-6 gap-y-4 border-b border-gray-300",children:[n.jsx(ze,{...r.getInputProps("project_number"),label:"Project Number",placeholder:"Ex : 20392",className:"col-span-12 md:col-span-3"}),n.jsx(ze,{...r.getInputProps("title"),label:"Nama Kegiatan",placeholder:"Ex : Perbaikan Alat MINDRAY xxxx",className:"col-span-12 md:col-span-9"}),n.jsx(Fa,{...r.getInputProps("customer_id"),label:"Instansi",placeholder:"Pilih Instansi",className:"col-span-12 md:col-span-12",withinPortal:!0,nothingFound:"Data tidak ditemukan"}),n.jsx(Ea,{...r.getInputProps("product_id"),label:"Produk",placeholder:"Pilih Produk",className:"col-span-12 md:col-span-12",limit:20,nothingFound:"Data tidak ditemukan"}),n.jsx(ze,{...r.getInputProps("serial_number"),label:"Serial Number",placeholder:"Ex : MU/23/09/001",className:"col-span-12 md:col-span-5"}),n.jsx(Ra,{...r.getInputProps("date_entry"),label:"Tanggal Masuk",placeholder:"Pilih Tanggal",className:"col-span-6 md:col-span-5",popoverProps:{withinPortal:!0},rightSection:n.jsx($a,{size:16,color:"gray"}),valueFormat:"D MMMM YYYY"}),n.jsx(Ba,{...r.getInputProps("warranty_month"),label:"Masa Garansi",placeholder:". . .",className:"col-span-6 md:col-span-2",hideControls:!0,rightSection:n.jsx("span",{className:"text-xs text-gray-600 pr-7",children:"/bulan"})}),n.jsx(Tr,{...r.getInputProps("engineer_ids"),label:"Teknisi",placeholder:"Pilih Teknisi",className:"col-span-12 md:col-span-12",limit:20,withinPortal:!0,nothingFound:"Data tidak ditemukan"})]}),n.jsxs("div",{className:"pt-4 grid grid-cols-12 gap-x-6 gap-y-4",children:[n.jsxs("div",{className:"col-span-12",children:[n.jsx("div",{className:"text-sm mb-1",children:"File BASTB"}),n.jsx(V,{onDrop:l=>r.setFieldValue("bastb_file",l[0]||void 0),onReject:()=>te.show({message:"File tidak sesuai",color:"red"}),maxSize:5*1024**2,maxFiles:1,children:n.jsxs(Je,{position:"center",spacing:"md",className:"pointer-events-none text-center min-h-[4rem] text-gray-600",children:[n.jsx(V.Accept,{children:n.jsx(me,{size:32,stroke:1.5,className:"text-primary-600"})}),n.jsx(V.Reject,{children:n.jsx(Ee,{size:32,stroke:1.5,className:"text-red-600"})}),n.jsx(V.Idle,{children:n.jsx(me,{size:32,stroke:1.5})}),r.values.bastb_file?n.jsx("div",{children:r.values.bastb_file.name}):n.jsx("div",{children:"Klik atau drag file untuk upload"})]})}),r.errors.bastb_file&&n.jsx("div",{className:"text-xs text-red-600 mt-1.5",children:r.errors.bastb_file})]}),n.jsxs("div",{className:"col-span-12",children:[n.jsx("div",{className:"text-sm mb-1",children:"File BASTP"}),n.jsx(V,{onDrop:l=>r.setFieldValue("bastp_file",l[0]||void 0),onReject:()=>te.show({message:"File tidak sesuai",color:"red"}),maxSize:5*1024**2,maxFiles:1,children:n.jsxs(Je,{position:"center",spacing:"md",className:"pointer-events-none text-center min-h-[4rem] text-gray-600",children:[n.jsx(V.Accept,{children:n.jsx(me,{size:32,stroke:1.5,className:"text-primary-600"})}),n.jsx(V.Reject,{children:n.jsx(Ee,{size:32,stroke:1.5,className:"text-red-600"})}),n.jsx(V.Idle,{children:n.jsx(me,{size:32,stroke:1.5})}),r.values.bastp_file?n.jsx("div",{children:r.values.bastp_file.name}):n.jsx("div",{children:"Klik atau drag file untuk upload"})]})}),r.errors.bastp_file&&n.jsx("div",{className:"text-xs text-red-600 mt-1.5",children:r.errors.bastp_file})]}),n.jsx(bt,{...r.getInputProps("note"),label:"Catatan",placeholder:"Tambahkan Catatan. . .",className:"col-span-12 md:col-span-12"})]})]}),n.jsxs(he.Section,{p:"lg",withBorder:!0,className:"flex justify-end items-center space-x-4",children:[n.jsx(Re,{component:Be,to:"/installation",variant:"light",color:"gray.6",bg:"gray.2",children:"Batal"}),n.jsx(Re,{type:"submit",loading:a,children:"Simpan"})]})]})},Kr=()=>n.jsxs("main",{children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Data Install Base"}),n.jsx(Re,{component:Be,to:"/installation/create",children:"Tambah"})]}),n.jsx("section",{className:"mb-8",children:n.jsx(Br,{})})]}),Ur=()=>n.jsxs("main",{children:[n.jsx("div",{className:"mb-4 flex items-center justify-between",children:n.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Data Install Base"})}),n.jsx(Lr,{})]});export{Ur as InstallationCreate,Kr as Installations};
